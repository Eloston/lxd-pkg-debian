From 516245a2cbdd6024f0bc865ce16a535fa3ed91db Mon Sep 17 00:00:00 2001
From: Free Ekanayaka <free.ekanayaka@canonical.com>
Date: Mon, 16 Apr 2018 17:18:35 +0000
Subject: Log the error that made Daemon.Init() fail

Signed-off-by: Free Ekanayaka <free.ekanayaka@canonical.com>
---
 lxd/daemon.go | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/lxd/daemon.go b/lxd/daemon.go
index a7316763..15c87878 100644
--- a/lxd/daemon.go
+++ b/lxd/daemon.go
@@ -365,6 +365,7 @@ func (d *Daemon) Init() error {
 	// cleanup any state we produced so far. Errors happening here will be
 	// ignored.
 	if err != nil {
+		logger.Errorf("Failed to start the daemon: %v", err)
 		d.Stop()
 	}
 
@@ -699,6 +700,7 @@ func (d *Daemon) Kill() {
 
 // Stop stops the shared daemon.
 func (d *Daemon) Stop() error {
+	logger.Info("Starting shutdown sequence")
 	errs := []error{}
 	trackError := func(err error) {
 		if err != nil {
@@ -780,6 +782,9 @@ func (d *Daemon) Stop() error {
 		}
 		err = fmt.Errorf(format, errs[0])
 	}
+	if err != nil {
+		logger.Errorf("Failed to cleanly shutdown daemon: %v", err)
+	}
 	return err
 }
 
