From e32e64a2473cdb2030672490dc82ca29cf402801 Mon Sep 17 00:00:00 2001
From: Christian Brauner <christian.brauner@ubuntu.com>
Date: Sun, 2 Jul 2017 23:32:13 +0200
Subject: import: remove last dependency on symlink

When importing containers we do not rely on symlinks.

Signed-off-by: Christian Brauner <christian.brauner@ubuntu.com>
---
 lxd/api_internal.go | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/lxd/api_internal.go b/lxd/api_internal.go
index 3a520be8..a41746ff 100644
--- a/lxd/api_internal.go
+++ b/lxd/api_internal.go
@@ -182,7 +182,8 @@ func internalImport(d *Daemon, r *http.Request) Response {
 	}
 
 	// Read in the backup.yaml file.
-	backup, err := slurpBackupFile(shared.VarPath("containers", req.Name, "backup.yaml"))
+	backupYamlPath := shared.VarPath("storage-pools", containerPoolName, "containers", req.Name, "backup.yaml")
+	backup, err := slurpBackupFile(backupYamlPath)
 	if err != nil {
 		return SmartError(err)
 	}
