From e7a792f6c3ec2c9406204952404d8e29808ce04a Mon Sep 17 00:00:00 2001
From: Alberto Donato <alberto.donato@canonical.com>
Date: Thu, 21 Sep 2017 09:50:40 +0200
Subject: shared/version: add helper to get platform-specific versions

Signed-off-by: Alberto Donato <alberto.donato@canonical.com>
---
 shared/version/platform_linux.go  | 30 ++++++++++++++++++++++++++++++
 shared/version/platform_others.go |  7 +++++++
 2 files changed, 37 insertions(+)
 create mode 100644 shared/version/platform_linux.go
 create mode 100644 shared/version/platform_others.go

diff --git a/shared/version/platform_linux.go b/shared/version/platform_linux.go
new file mode 100644
index 00000000..55deeadc
--- /dev/null
+++ b/shared/version/platform_linux.go
@@ -0,0 +1,30 @@
+// +build linux
+
+package version
+
+import (
+	"github.com/lxc/lxd/shared"
+	"github.com/lxc/lxd/shared/osarch"
+)
+
+func getPlatformVersionStrings() []string {
+	versions := []string{}
+
+	// add kernel version
+	uname, err := shared.Uname()
+	if err == nil {
+		versions = append(versions, uname.Release)
+	}
+
+	// add distribution info
+	lsbRelease, err := osarch.GetLSBRelease()
+	if err == nil {
+		for _, key := range []string{"NAME", "VERSION_ID"} {
+			value, ok := lsbRelease[key]
+			if ok {
+				versions = append(versions, value)
+			}
+		}
+	}
+	return versions
+}
diff --git a/shared/version/platform_others.go b/shared/version/platform_others.go
new file mode 100644
index 00000000..d2914868
--- /dev/null
+++ b/shared/version/platform_others.go
@@ -0,0 +1,7 @@
+// +build !linux
+
+package version
+
+func getPlatformVersionStrings() []string {
+	return []string{}
+}
