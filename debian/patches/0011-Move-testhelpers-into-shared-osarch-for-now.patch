From 7c5de9ba18aea8ff7293fc6a99effb121f480400 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?St=C3=A9phane=20Graber?= <stgraber@ubuntu.com>
Date: Tue, 26 Sep 2017 13:16:20 -0400
Subject: Move testhelpers into shared/osarch for now
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This avoids us an extra build dependency on stretchr.

Signed-off-by: St√©phane Graber <stgraber@ubuntu.com>
---
 shared/osarch/release_test.go                               | 12 +++++-------
 shared/{testhelpers/tempfile.go => osarch/tempfile_test.go} |  2 +-
 2 files changed, 6 insertions(+), 8 deletions(-)
 rename shared/{testhelpers/tempfile.go => osarch/tempfile_test.go} (95%)

diff --git a/shared/osarch/release_test.go b/shared/osarch/release_test.go
index 55b83084..f91237e1 100644
--- a/shared/osarch/release_test.go
+++ b/shared/osarch/release_test.go
@@ -5,8 +5,6 @@ import (
 	"testing"
 
 	"github.com/stretchr/testify/suite"
-
-	"github.com/lxc/lxd/shared/testhelpers"
 )
 
 type releaseTestSuite struct {
@@ -22,7 +20,7 @@ func (s *releaseTestSuite) TestGetLSBRelease() {
 ID="ubuntu"
 VERSION_ID="16.04"
 `
-	filename, cleanup := testhelpers.WriteTempFile(s.Suite, "", "os-release", content)
+	filename, cleanup := WriteTempFile(s.Suite, "", "os-release", content)
 	defer cleanup()
 
 	lsbRelease, err := getLSBRelease(filename)
@@ -37,7 +35,7 @@ VERSION_ID="16.04"
 
 func (s *releaseTestSuite) TestGetLSBReleaseSingleQuotes() {
 	content := `NAME='Ubuntu'`
-	filename, cleanup := testhelpers.WriteTempFile(s.Suite, "", "os-release", content)
+	filename, cleanup := WriteTempFile(s.Suite, "", "os-release", content)
 	defer cleanup()
 
 	lsbRelease, err := getLSBRelease(filename)
@@ -47,7 +45,7 @@ func (s *releaseTestSuite) TestGetLSBReleaseSingleQuotes() {
 
 func (s *releaseTestSuite) TestGetLSBReleaseNoQuotes() {
 	content := `NAME=Ubuntu`
-	filename, cleanup := testhelpers.WriteTempFile(s.Suite, "", "os-release", content)
+	filename, cleanup := WriteTempFile(s.Suite, "", "os-release", content)
 	defer cleanup()
 
 	lsbRelease, err := getLSBRelease(filename)
@@ -63,7 +61,7 @@ ID="ubuntu"
 # skip this line
 VERSION_ID="16.04"
 `
-	filename, cleanup := testhelpers.WriteTempFile(s.Suite, "", "os-release", content)
+	filename, cleanup := WriteTempFile(s.Suite, "", "os-release", content)
 	defer cleanup()
 
 	lsbRelease, err := getLSBRelease(filename)
@@ -82,7 +80,7 @@ NAME="Ubuntu"
 this is invalid
 ID="ubuntu"
 `
-	filename, cleanup := testhelpers.WriteTempFile(s.Suite, "", "os-release", content)
+	filename, cleanup := WriteTempFile(s.Suite, "", "os-release", content)
 	defer cleanup()
 
 	_, err := getLSBRelease(filename)
diff --git a/shared/testhelpers/tempfile.go b/shared/osarch/tempfile_test.go
similarity index 95%
rename from shared/testhelpers/tempfile.go
rename to shared/osarch/tempfile_test.go
index b1abebe7..2a47f188 100644
--- a/shared/testhelpers/tempfile.go
+++ b/shared/osarch/tempfile_test.go
@@ -1,4 +1,4 @@
-package testhelpers
+package osarch
 
 import (
 	"os"
