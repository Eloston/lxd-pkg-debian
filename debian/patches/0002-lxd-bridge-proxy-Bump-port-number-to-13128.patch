From 142da9dc04de19bb6bbff5fd3690f0300498692e Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?St=C3=A9phane=20Graber?= <stgraber@ubuntu.com>
Date: Fri, 1 Apr 2016 23:04:51 -0400
Subject: lxd-bridge-proxy: Bump port number to 13128
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This is to avoid accidental collisions with squid.

Signed-off-by: St√©phane Graber <stgraber@ubuntu.com>
---
 lxd-bridge/lxd-bridge               | 2 +-
 lxd-bridge/lxd-bridge-proxy/main.go | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/lxd-bridge/lxd-bridge b/lxd-bridge/lxd-bridge
index e02d2c6..75e6e88 100755
--- a/lxd-bridge/lxd-bridge
+++ b/lxd-bridge/lxd-bridge
@@ -168,7 +168,7 @@ start() {
     fi
 
     if [ "${HAS_IPV6}" = "true" ] && [ "${LXD_IPV6_PROXY}" = "true" ]; then
-        PATH="${PATH}:$(dirname "${0}")" lxd-bridge-proxy --addr="[fe80::1%${LXD_BRIDGE}]:3128" &
+        PATH="${PATH}:$(dirname "${0}")" lxd-bridge-proxy --addr="[fe80::1%${LXD_BRIDGE}]:13128" &
         PID=$!
         echo "${PID}" > "${varrun}/proxy.pid"
     fi
diff --git a/lxd-bridge/lxd-bridge-proxy/main.go b/lxd-bridge/lxd-bridge-proxy/main.go
index 4ac89a9..48b3a0b 100644
--- a/lxd-bridge/lxd-bridge-proxy/main.go
+++ b/lxd-bridge/lxd-bridge-proxy/main.go
@@ -18,7 +18,7 @@ func NewProxy() *httputil.ReverseProxy {
 }
 
 func main() {
-	addr := flag.String("addr", "[fe80::1%lxdbr0]:3128", "proxy listen address")
+	addr := flag.String("addr", "[fe80::1%lxdbr0]:13128", "proxy listen address")
 	flag.Parse()
 
 	log.Fatal(http.ListenAndServe(*addr, NewProxy()))
