From 46f80f1d02ced2f45196d0d371926aef99f1ec8d Mon Sep 17 00:00:00 2001
From: Alberto Donato <alberto.donato@canonical.com>
Date: Thu, 21 Sep 2017 10:48:22 +0200
Subject: shared/util: add helper to create tempfiles

Signed-off-by: Alberto Donato <alberto.donato@canonical.com>
---
 shared/testhelpers/tempfile.go | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)
 create mode 100644 shared/testhelpers/tempfile.go

diff --git a/shared/testhelpers/tempfile.go b/shared/testhelpers/tempfile.go
new file mode 100644
index 00000000..b1abebe7
--- /dev/null
+++ b/shared/testhelpers/tempfile.go
@@ -0,0 +1,19 @@
+package testhelpers
+
+import (
+	"os"
+
+	"github.com/stretchr/testify/suite"
+
+	"github.com/lxc/lxd/shared"
+)
+
+// WriteTempFile writes content to a temporary file.
+func WriteTempFile(s suite.Suite, dir string, prefix string, content string) (string, func()) {
+	filename, err := shared.WriteTempFile(dir, prefix, content)
+	if err != nil {
+		s.T().Fatalf("failed to create temporary file: %v", err)
+	}
+
+	return filename, func() { os.Remove(filename) }
+}
