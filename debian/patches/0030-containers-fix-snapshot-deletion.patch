From 26eea20fe2aa96b6003c7d427ff02c8793e053f2 Mon Sep 17 00:00:00 2001
From: Christian Brauner <christian.brauner@ubuntu.com>
Date: Mon, 9 Apr 2018 18:43:52 +0200
Subject: containers: fix snapshot deletion

Closes #4431.

Signed-off-by: Christian Brauner <christian.brauner@ubuntu.com>
---
 lxd/container_snapshot.go | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/lxd/container_snapshot.go b/lxd/container_snapshot.go
index bed3233a..fc39d03b 100644
--- a/lxd/container_snapshot.go
+++ b/lxd/container_snapshot.go
@@ -6,6 +6,7 @@ import (
 	"fmt"
 	"io/ioutil"
 	"net/http"
+	"net/url"
 	"strings"
 
 	"github.com/gorilla/mux"
@@ -161,6 +162,10 @@ func snapshotHandler(d *Daemon, r *http.Request) Response {
 		return response
 	}
 
+	snapshotName, err = url.QueryUnescape(snapshotName)
+	if err != nil {
+		return SmartError(err)
+	}
 	sc, err := containerLoadByName(
 		d.State(),
 		containerName+
